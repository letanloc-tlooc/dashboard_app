{% extends "index.html" %} {% block content %}
<div class="container py-4">
  <!-- Upload Form -->
  <form
    id="uploadForm"
    method="POST"
    enctype="multipart/form-data"
    action="{{ url_for('index') }}"
    class="row g-2 mb-4"
  >
    <div class="col-12 col-md-6">
      <input
        type="file"
        name="file"
        id="fileInput"
        class="form-control"
        accept=".csv, .xls, .xlsx"
        required
      />
    </div>
    <div class="col-6 col-md-3">
      <button class="btn btn-success w-100">üì• T·∫£i l√™n</button>
    </div>
  </form>

  {% if table_html %}
  <!-- B·∫£ng d·ªØ li·ªáu -->
  <div class="table-container" style="max-height: 600px; overflow-y: auto">
    {{ table_html | safe }}
  </div>
  {% endif %}
</div>
<script>
  document
    .getElementById("uploadForm")
    .addEventListener("submit", function (e) {
      const file = document.getElementById("fileInput").files[0];
      if (!file) return;

      const allowedExtensions = ["csv", "xls", "xlsx"];
      const ext = file.name.split(".").pop().toLowerCase();
      if (!allowedExtensions.includes(ext)) {
        e.preventDefault();
        alert("‚ùå Ch·ªâ h·ªó tr·ª£ file .csv, .xls, .xlsx");
      }
    });
</script>

{% endblock %}
