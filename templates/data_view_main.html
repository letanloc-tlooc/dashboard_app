{% extends "index.html" %} {% block content %}
<div class="container-fluid py-4">
  <h3 class="mb-4 text-center">📊 Website Dashboard</h3>

  Biểu đồ 1 thuộc tính
  <div class="row mb-4">
    <div class="col-md-6">
      <form action="/chart" method="POST" class="bg-light p-3 rounded h-100">
        <label class="form-label">📌 Chọn thuộc tính để vẽ biểu đồ:</label>
        <select name="selected_col" class="form-select mb-2" required>
          {% for col in columns %}
          <option value="{{ col }}">{{ col }}</option>
          {% endfor %}
        </select>
        <button class="btn btn-primary w-100">📊 Vẽ biểu đồ</button>
      </form>
    </div>
    <div class="col-md-6">
      <form action="/describe" method="POST" class="bg-light p-3 rounded h-100">
        <label class="form-label">📌 Chọn thuộc tính số để thống kê:</label>
        <select name="selected_col" class="form-select mb-2" required>
          {% for col in numeric_columns %}
          <option value="{{ col }}">{{ col }}</option>
          {% endfor %}
        </select>
        <button class="btn btn-warning w-100">📈 Thống kê mô tả</button>
      </form>
    </div>
  </div>

  <!-- Biểu đồ 2 thuộc tính phân loại -->
  <div class="row mb-4">
    <div class="col-md-6">
      <form
        action="/plot_categorical"
        method="POST"
        class="bg-light p-3 rounded h-100"
      >
        <label class="form-label">🟨 Cột phân loại X:</label>
        <select name="col1" class="form-select mb-2" required>
          {% for col in categorical_columns %}
          <option value="{{ col }}">{{ col }}</option>
          {% endfor %}
        </select>
        <label class="form-label">🟧 Phân nhóm (Hue):</label>
        <select name="col2" class="form-select mb-2" required>
          {% for col in categorical_columns %}
          <option value="{{ col }}">{{ col }}</option>
          {% endfor %}
        </select>
        <button class="btn btn-warning w-100">🧮 Vẽ biểu đồ nhóm</button>
      </form>
    </div>

    <!-- Heatmap -->
    <div class="col-md-6 d-flex align-items-center justify-content-center">
      <form action="/heatmap" method="GET" class="w-100">
        <button class="btn btn-danger w-100 p-3">
          🔍 Xem Heatmap (Tương quan)
        </button>
      </form>
    </div>
  </div>

  <!-- Biểu đồ phân loại vs định lượng -->
  <form
    action="/plot_cate_num"
    method="POST"
    class="row g-3 mb-5 bg-light p-3 rounded"
  >
    <div class="col-md-5">
      <label class="form-label">🧩 Cột phân loại:</label>
      <select
        name="col_cat"
        id="col_cat"
        class="form-select"
        onchange="updateNumericOptions()"
        required
      >
        {% for col in categorical_columns %}
        <option value="{{ col }}">{{ col }}</option>
        {% endfor %}
      </select>
    </div>
    <div class="col-md-5">
      <label class="form-label">📏 Cột định lượng:</label>
      <select name="col_num" id="col_num" class="form-select" required>
        {% for col in quantitative_columns %}
        <option value="{{ col }}">{{ col }}</option>
        {% endfor %}
      </select>
    </div>
    <div class="col-md-2 d-flex align-items-end">
      <button class="btn btn-success w-100">📈 Vẽ biểu đồ kết hợp</button>
    </div>
  </form>
</div>
{% endblock %} {% block scripts %}
<script>
  // Truyền biến Python vào JS (phải làm trong template)
  window.categoricalColumns = {{ categorical_columns | tojson | safe }};
  window.numericColumns = {{ numeric_columns | tojson | safe }};
</script>
<script src="{{ url_for('static', filename='js/data_view.js') }}"></script>
{% endblock %}
